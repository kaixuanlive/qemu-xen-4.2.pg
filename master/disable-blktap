diff -r f18a3accd55f hw/xen_machine_pv.c
--- a/hw/xen_machine_pv.c	Wed Dec 19 15:21:34 2012 +0000
+++ b/hw/xen_machine_pv.c	Wed Dec 19 15:21:52 2012 +0000
@@ -47,11 +47,6 @@ static void xen_init_pv(ram_addr_t ram_s
     CPUState *env;
     uint32_t domid_target;
 
-#ifndef CONFIG_STUBDOM
-    /* Initialize tapdisk client */
-    init_blktap();
-#endif
-
     /* Initialize a dummy CPU */
     if (cpu_model == NULL) {
 #ifdef TARGET_X86_64
diff -r f18a3accd55f xen-config-host.h
--- a/xen-config-host.h	Wed Dec 19 15:21:34 2012 +0000
+++ b/xen-config-host.h	Wed Dec 19 15:21:52 2012 +0000
@@ -18,9 +18,6 @@ extern int domid, domid_backend;
 
 #include "xenctrl.h"
 #include "xs.h"
-#ifndef CONFIG_STUBDOM
-#include "blktaplib.h"
-#endif
 
 #define BIOS_SIZE ((256 + 64) * 1024)
 
diff -r f18a3accd55f xen-hooks.mak
--- a/xen-hooks.mak	Wed Dec 19 15:21:34 2012 +0000
+++ b/xen-hooks.mak	Wed Dec 19 15:21:52 2012 +0000
@@ -46,9 +46,6 @@ CONFIG_SDL=
 CONFIG_AUDIO=
 OBJS += xenfbfront.o
 else
-CPPFLAGS+= -I$(XEN_ROOT)/tools/blktap/lib
-LIBS += -L$(XEN_ROOT)/tools/blktap/lib -lblktap
-OBJS += xen_blktap.o
 OBJS += tpm_tis.o
 endif
 
